<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>日语刷题 - 柴犬寿司店 (纯净版)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c:wght@400;700;800&display=swap" rel="stylesheet">
    
    <style>
        body {
            font-family: 'M PLUS Rounded 1c', sans-serif;
            background-color: #FFF3E0;
            background-image: 
                radial-gradient(#FFCC80 15%, transparent 16%), 
                radial-gradient(#FFCC80 15%, transparent 16%);
            background-size: 40px 40px;
            background-position: 0 0, 20px 20px;
            user-select: none;
            padding-bottom: 50px;
        }

        /* 按钮点击反馈优化 */
        .btn-cartoon {
            transition: all 0.1s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            top: 0;
            cursor: pointer;
        }
        .btn-cartoon:active {
            top: 4px;
            box-shadow: 0 0px 0 0 !important;
            transform: scale(0.98);
        }

        /* 主题色定义 */
        .theme-n1 { --bg: #FF5252; --shadow: #D32F2F; }
        .theme-n2 { --bg: #7C4DFF; --shadow: #512DA8; }
        .theme-n3 { --bg: #00E676; --shadow: #00C853; }
        .theme-n4 { --bg: #FFAB40; --shadow: #FF6D00; }
        .theme-n5 { --bg: #2979FF; --shadow: #1565C0; }

        .level-card { background-color: var(--bg); box-shadow: 0 6px 0 var(--shadow); }
        
        /* 动画 */
        .mascot-float { animation: float 3s ease-in-out infinite; }
        @keyframes float { 0% { transform: translateY(0px); } 50% { transform: translateY(-10px); } 100% { transform: translateY(0px); } }
        
        /* 点击小狗时的抖动动画 */
        .mascot-shake { animation: shake 0.3s ease-in-out; }
        @keyframes shake { 0% { transform: rotate(0deg); } 25% { transform: rotate(10deg); } 50% { transform: rotate(0deg); } 75% { transform: rotate(-10deg); } 100% { transform: rotate(0deg); } }

        .hidden-screen { display: none !important; }
        .fade-in { animation: fadeIn 0.4s ease-out forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .pop-in { animation: popIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        @keyframes popIn { 0% { transform: scale(0); opacity: 0; } 100% { transform: scale(1); opacity: 1; } }

        .opt-correct { background-color: #C8E6C9 !important; border-color: #4CAF50 !important; color: #1B5E20 !important; }
        .opt-wrong { background-color: #FFCDD2 !important; border-color: #F44336 !important; color: #B71C1C !important; }

        .wood-texture {
            background-color: #D7CCC8;
            background-image: repeating-linear-gradient(45deg, transparent, transparent 10px, #EFEBE9 10px, #EFEBE9 20px);
            box-shadow: inset 0 0 20px rgba(0,0,0,0.1);
        }
    </style>
</head>
<body class="flex flex-col items-center min-h-screen py-6 px-4 text-gray-800">

    <!-- 弹窗 -->
    <div id="resume-modal" class="fixed inset-0 bg-black/50 z-50 hidden-screen flex items-center justify-center p-4">
        <div class="bg-white rounded-3xl p-6 w-full max-w-sm text-center shadow-2xl border-4 border-blue-400 fade-in">
            <div class="text-5xl mb-4">💾</div>
            <h3 class="text-xl font-bold text-gray-700 mb-2">发现存档</h3>
            <p class="text-gray-500 text-sm mb-6">上次 <span id="resume-level-name" class="font-bold text-blue-500">N5</span> 没做完，继续吗？</p>
            <div class="grid grid-cols-2 gap-3">
                <button onclick="playSound('click'); confirmResume(false)" class="bg-gray-200 text-gray-600 font-bold py-3 rounded-xl hover:bg-gray-300">重开</button>
                <button onclick="playSound('click'); confirmResume(true)" class="bg-blue-500 text-white font-bold py-3 rounded-xl shadow-[0_4px_0_#1565C0] hover:translate-y-1 active:shadow-none transition-all">继续</button>
            </div>
        </div>
    </div>

    <!-- 吉祥物 -->
    <div class="mascot-float mb-2 text-center z-10 w-full max-w-md pointer-events-none">
        <div class="flex items-end justify-center">
            <div id="mascot-dog" class="text-7xl filter drop-shadow-xl cursor-pointer relative -mr-4 z-10 pointer-events-auto transition hover:scale-110 active:scale-90" onclick="pokeMascot()">
                🐕
            </div>
            <div class="bg-white px-5 py-3 rounded-2xl rounded-bl-none border-4 border-orange-400 font-bold text-orange-800 shadow-lg relative max-w-[280px] text-sm pointer-events-auto">
                <span id="mascot-dialog">欢迎光临！今天想吃点什么？🍣</span>
            </div>
        </div>
    </div>

    <!-- 1. 首页 -->
    <div id="screen-home" class="w-full max-w-md fade-in mt-6 relative z-20">
        <div class="bg-white p-6 rounded-3xl shadow-xl border-4 border-orange-100 mb-6 text-center">
            <h1 class="text-3xl font-extrabold text-gray-700 mb-2">日语寿司店</h1>
            <p class="text-gray-400 text-sm">点一份寿司，学一句日语！</p>
        </div>
        
        <div class="space-y-3">
            <button onclick="playSound('click'); checkProgress('N5')" class="w-full btn-cartoon theme-n5 level-card text-white text-xl font-bold py-4 rounded-3xl flex items-center justify-between px-6">
                <div class="flex items-center gap-3"><span class="text-3xl">🍵</span> <span>N5 入门</span></div>
                <span class="text-xs bg-white/20 px-2 py-1 rounded-lg">10题</span>
            </button>
            <button onclick="playSound('click'); checkProgress('N4')" class="w-full btn-cartoon theme-n4 level-card text-white text-xl font-bold py-4 rounded-3xl flex items-center justify-between px-6">
                <div class="flex items-center gap-3"><span class="text-3xl">🍙</span> <span>N4 基础</span></div>
                <span class="text-xs bg-white/20 px-2 py-1 rounded-lg">10题</span>
            </button>
            <button onclick="playSound('click'); checkProgress('N3')" class="w-full btn-cartoon theme-n3 level-card text-white text-xl font-bold py-4 rounded-3xl flex items-center justify-between px-6">
                <div class="flex items-center gap-3"><span class="text-3xl">🍡</span> <span>N3 中级</span></div>
                <span class="text-xs bg-white/20 px-2 py-1 rounded-lg">10题</span>
            </button>
            <button onclick="playSound('click'); checkProgress('N2')" class="w-full btn-cartoon theme-n2 level-card text-white text-xl font-bold py-4 rounded-3xl flex items-center justify-between px-6">
                <div class="flex items-center gap-3"><span class="text-3xl">🍤</span> <span>N2 上级</span></div>
                <span class="text-xs bg-white/20 px-2 py-1 rounded-lg">10题</span>
            </button>
            <button onclick="playSound('click'); checkProgress('N1')" class="w-full btn-cartoon theme-n1 level-card text-white text-xl font-bold py-4 rounded-3xl flex items-center justify-between px-6">
                <div class="flex items-center gap-3"><span class="text-3xl">🍣</span> <span>N1 大师</span></div>
                <span class="text-xs bg-white/20 px-2 py-1 rounded-lg">10题</span>
            </button>
        </div>
    </div>

    <!-- 2. 答题页 -->
    <div id="screen-quiz" class="hidden-screen w-full max-w-md fade-in pb-10 relative mt-6">
        <button onclick="playSound('click'); saveAndExit()" class="absolute -top-14 right-2 z-40 bg-white text-red-500 px-4 py-2 rounded-full text-sm font-bold border-2 border-red-200 shadow-lg hover:bg-red-50 flex items-center gap-1 active:scale-95 transition-transform">
            <span>💾</span> 保存退出
        </button>

        <!-- 寿司槽 -->
        <div class="wood-texture w-full h-16 rounded-xl mb-4 border-b-4 border-yellow-700 flex items-center justify-between px-3 relative z-0">
            <div id="sushi-bar-slots" class="flex justify-between w-full"></div>
            <div class="absolute -top-3 left-1/2 transform -translate-x-1/2 bg-yellow-700 text-white text-xs px-3 py-1 rounded-full font-bold shadow-sm">收集进度</div>
        </div>

        <div class="bg-white border-4 border-gray-200 rounded-3xl p-6 shadow-xl mb-4 relative z-0">
            <div class="flex justify-between items-center mb-2">
                <div class="text-gray-400 text-xs font-bold bg-gray-100 px-2 py-1 rounded">Q. <span id="q-number">1</span>/10</div>
                <div id="level-badge" class="font-bold text-blue-500">N5</div>
            </div>
            <p id="question-text" class="text-2xl font-extrabold text-center py-2 mb-2 break-words text-gray-800">题目加载中...</p>
            <p id="question-sub" class="text-center text-gray-500 mb-2 text-sm">(提示信息)</p>
        </div>

        <div id="options-container" class="grid grid-cols-1 gap-3 mb-6"></div>

        <div id="explanation-area" class="hidden-screen bg-orange-50 border-2 border-orange-200 rounded-2xl p-4 mb-6 relative">
            <div class="absolute -top-3 left-4 bg-orange-200 text-orange-800 text-xs font-bold px-2 py-1 rounded">解析MEMO</div>
            <p id="explanation-text" class="text-sm text-gray-700 leading-relaxed mt-2"></p>
        </div>

        <button id="next-btn" onclick="playSound('click'); nextQuestion()" class="hidden-screen w-full btn-cartoon bg-gray-800 text-white shadow-[0_6px_0_#000] text-xl font-bold py-3 rounded-2xl">
            下一题 ➡
        </button>
    </div>

    <!-- 3. 结算页 -->
    <div id="screen-result" class="hidden-screen w-full max-w-md fade-in text-center pb-10 mt-6">
        <h2 class="text-2xl font-extrabold text-gray-700 mb-2">本次收获</h2>
        
        <div class="bg-red-900 p-2 rounded-[2rem] shadow-2xl mb-6 mx-auto max-w-sm relative">
            <div class="border-2 border-yellow-600 rounded-[1.8rem] p-1 h-full bg-red-800">
                <div id="bento-box" class="bg-black/90 rounded-[1.5rem] p-4 grid grid-cols-2 gap-2 min-h-[300px]"></div>
            </div>
        </div>

        <div class="flex justify-center items-center gap-4 mb-6">
            <div class="text-right">
                <div class="text-xs text-gray-400">正确率</div>
                <div id="final-score" class="text-3xl font-black text-gray-800">0%</div>
            </div>
            <div class="h-10 w-1 bg-gray-200"></div>
            <div class="text-left">
                <div class="text-xs text-gray-400">获得称号</div>
                <div id="result-title" class="text-xl font-bold text-orange-600">-</div>
            </div>
        </div>
        
        <button onclick="playSound('click'); checkProgress(currentLevel, true)" class="w-full btn-cartoon bg-orange-500 text-white shadow-[0_6px_0_#E65100] text-xl font-bold py-3 rounded-2xl mb-3">再来一盘</button>
        <button onclick="playSound('click'); goHome()" class="w-full btn-cartoon bg-white text-gray-600 border-2 border-gray-200 shadow-[0_4px_0_#E0E0E0] text-lg font-bold py-3 rounded-2xl">返回大厅</button>
    </div>

    <script>
        // ----------------- 🔊 音效系统 -----------------
        const SFX = {
            click: new Audio("https://cdn.pixabay.com/download/audio/2022/03/15/audio_736f990921.mp3?filename=bubble-pop-28367.mp3"),
            correct: new Audio("https://cdn.pixabay.com/download/audio/2021/08/04/audio_12b0c7443c.mp3?filename=success-1-6297.mp3"),
            wrong: new Audio("https://cdn.pixabay.com/download/audio/2022/03/10/audio_c8c8a73467.mp3?filename=wrong-answer-129254.mp3"),
            win: new Audio("https://cdn.pixabay.com/download/audio/2021/08/04/audio_0625c153e1.mp3?filename=success-fanfare-trumpets-6185.mp3"),
            bark: new Audio("dog.MP3") 
        };

        // 统一播放函数
        function playSound(type) {
            const sound = SFX[type];
            if(sound) {
                sound.currentTime = 0;
                sound.volume = 0.6;
                sound.play().catch(e => console.log('Wait for interaction'));
            }
        }

        // ----------------- 游戏数据 -----------------
        const SUSHI_REWARDS = [
            { icon: '🍵', name: '热茶' }, { icon: '🍙', name: '饭团' },
            { icon: '🍥', name: '鱼板' }, { icon: '🥟', name: '煎饺' },
            { icon: '🍤', name: '天妇罗' }, { icon: '🍢', name: '关东煮' },
            { icon: '🍣', name: '三文鱼' }, { icon: '🍱', name: '豪华便当' },
            { icon: '🍰', name: '甜点' }, { icon: '🏆', name: '极上拼盘' }
        ];

        const fullQuestionDB = {
       'N5': [
        // 初级词汇与读音（20题）
        { q: '猫', sub: '读音是？', options: ['いぬ', 'ねこ', 'とり', 'うま'], ans: 1, explain: '猫 (ねこ) = 猫' },
        { q: '食べる', sub: '意思是？', options: ['喝', '看', '吃', '跑'], ans: 2, explain: '食べる (たべる) = 吃' },
        { q: '川', sub: '意思是？', options: ['海', '川', '山', '田'], ans: 1, explain: '川 (かわ) = 河流' },
        { q: '本', sub: '读音是？', options: ['はん', 'ほん', 'ばん', 'ぼん'], ans: 1, explain: '本 (ほん) = 书' },
        { q: '学校', sub: '读音是？', options: ['がっこう', 'がこう', 'かっこう', 'かこう'], ans: 0, explain: '学校 (がっこう) = 学校' },
        { q: '先生', sub: '意思是？', options: ['学生', '医生', '老师', '律师'], ans: 2, explain: '先生 (せんせい) = 老师' },
        { q: '高い', sub: '读音是？', options: ['たかい', 'やすい', 'おもい', 'ひくい'], ans: 0, explain: '高い (たかい) = 高/贵' },
        { q: '四つ', sub: '读音是？', options: ['よっつ', 'よつ', 'よんつ', 'しつ'], ans: 0, explain: '四つ (よっつ) = 4个' },
        { q: '雨', sub: '意思是？', options: ['雪', '风', '云', '雨'], ans: 3, explain: '雨 (あめ) = 雨' },
        { q: '元気', sub: '读音是？', options: ['てんき', 'げんき', 'びょうき', 'ゆうき'], ans: 1, explain: '元気 (げんき) = 精神/健康' },
        { q: '今日', sub: '读音是？', options: ['きのう', 'きょう', 'あした', 'あさって'], ans: 1, explain: '今日 (きょう) = 今天' },
        { q: '行く', sub: '意思是？', options: ['来', '去', '回', '停'], ans: 1, explain: '行く (いく) = 去' },
        { q: '大きい', sub: '意思是？', options: ['小的', '大的', '轻的', '重的'], ans: 1, explain: '大きい (おおきい) = 大的' },
        { q: '水', sub: '读音是？', options: ['みず', 'みづ', 'すい', 'ずい'], ans: 0, explain: '水 (みず) = 水' },
        { q: '妹', sub: '意思是？', options: ['姐姐', '妹妹', '弟弟', '哥哥'], ans: 1, explain: '妹 (いもうと) = 妹妹' },
        { q: '白い', sub: '读音是？', options: ['あかい', 'くろい', 'しろい', 'あおい'], ans: 2, explain: '白い (しろい) = 白色的' },
        { q: '午前', sub: '意思是？', options: ['上午', '下午', '晚上', '中午'], ans: 0, explain: '午前 (ごぜん) = 上午' },
        { q: '午後', sub: '意思是？', options: ['上午', '下午', '晚上', '早晨'], ans: 1, explain: '午後 (ごご) = 下午' },
        { q: '一年', sub: '读音是？', options: ['いちねん', 'いちねん', 'いちねん', 'いちねん'], ans: 1, explain: '一年 (いちねん) = 一年' },
        { q: '日本語', sub: '读音是？', options: ['にほんご', 'にほんご', 'にほんご', 'にほんご'], ans: 0, explain: '日本語 (にほんご) = 日语' },
        { q: '何', sub: '读音是？', options: ['なに', 'なん', 'なに', 'なん'], ans: 0, explain: '何 (なに/なん) = 什么' },
        { q: 'どこ', sub: '意思是？', options: ['谁', '哪里', '什么时候', '为什么'], ans: 1, explain: 'どこ = 哪里' },
        { q: '誰', sub: '读音是？', options: ['だれ', 'なに', 'どこ', 'いつ'], ans: 0, explain: '誰 (だれ) = 谁' },
        { q: 'いくら', sub: '意思是？', options: ['多少钱', '几个', '多大', '多高'], ans: 0, explain: 'いくら = 多少钱' },
        { q: '一番', sub: '读音是？', options: ['いちばん', 'にばん', 'さんばん', 'よんばん'], ans: 0, explain: '一番 (いちばん) = 第一' },
        { q: '左', sub: '意思是？', options: ['右', '左', '上', '下'], ans: 1, explain: '左 (ひだり) = 左边' },
        { q: '右', sub: '意思是？', options: ['右', '左', '前', '后'], ans: 0, explain: '右 (みぎ) = 右边' },
        { q: '前', sub: '读音是？', options: ['まえ', 'うしろ', 'ひだり', 'みぎ'], ans: 0, explain: '前 (まえ) = 前面' },
        { q: '後ろ', sub: '意思是？', options: ['前面', '后面', '左边', '右边'], ans: 1, explain: '後ろ (うしろ) = 后面' },
        { q: '中', sub: '读音是？', options: ['なか', 'そと', 'うえ', 'した'], ans: 0, explain: '中 (なか) = 里面' },
		 // 情景对话40题（前10题示例）
    {
        q: 'A: お名前は？ B: ________。',
        sub: '选择正确的回答',
        options: ['ありがとう', 'すみません', '田中です', 'お願いします'],
        ans: 2,
        explain: '当被问及名字时，应回答"田中です"(我是田中)'
    },
    {
        q: '店員: いらっしゃいませ。 客: ________。',
        sub: '选择正确的回答',
        options: ['さようなら', 'こんにちは', 'すみません', 'ありがとう'],
        ans: 1,
        explain: '进入商店时，可以用"こんにちは"(你好)回应店员的欢迎'
    },
	{
        q: 'A: おはようございます。 B: ________。',
        sub: '早晨问候',
        options: ['こんにちは', 'おはようございます', 'こんばんは', 'さようなら'],
        ans: 1,
        explain: '回应早晨问候时也说"おはようございます"'
    },
    {
        q: 'A: ありがとうございます。 B: ________。',
        sub: '感谢的回应',
        options: ['すみません', 'どういたしまして', 'お願いします', 'こんにちは'],
        ans: 1,
        explain: 'どういたしまして = 不客气'
    },
    {
        q: 'A: これはいくらですか？ B: ________。',
        sub: '询问价格',
        options: ['500円です', '5個です', '大きいです', '赤いです'],
        ans: 0,
        explain: '500円です = 500日元'
    },
    {
        q: 'A: すみません、トイレはどこですか？ B: ________。',
        sub: '询问地点',
        options: ['あそこです', '5時です', '美味しいです', '寒いです'],
        ans: 0,
        explain: 'あそこです = 在那边'
    },
    {
        q: 'A: 今日は暑いですね。 B: ________。',
        sub: '天气对话',
        options: ['そうですね', 'いいえ', 'わかりません', '違います'],
        ans: 0,
        explain: 'そうですね = 是啊(表示同意)'
    },
    {
        q: 'A: 私は学生です。 B: ________。',
        sub: '自我介绍',
        options: ['私も学生です', '私は先生です', 'あなたは学生です', '彼は学生です'],
        ans: 0,
        explain: '私も学生です = 我也是学生'
    },
    {
        q: 'A: これはペンです。 B: ________。',
        sub: '物品确认',
        options: ['それはペンです', 'これはペンです', 'あれはペンです', 'どれがペンですか'],
        ans: 0,
        explain: 'それ = 那个(离听话者近)'
    },
    {
        q: 'A: 今何時ですか？ B: ________。',
        sub: '询问时间',
        options: ['3時です', '3個です', '3人です', '3階です'],
        ans: 0,
        explain: '3時です = 3点'
    },
	// 新增词汇题（10题）
        {
            q: '椅子',
            sub: '读音是？',
            options: ['いす', 'つくえ', 'たたみ', 'とだな'],
            ans: 0,
            explain: '椅子 (いす) = 椅子'
        },
        {
            q: '机',
            sub: '读音是？',
            options: ['いす', 'つくえ', 'たたみ', 'とだな'],
            ans: 1,
            explain: '机 (つくえ) = 桌子'
        },
        {
            q: '新聞',
            sub: '意思是？',
            options: ['电视', '报纸', '杂志', '书籍'],
            ans: 1,
            explain: '新聞 (しんぶん) = 报纸'
        },
        {
            q: '鉛筆',
            sub: '读音是？',
            options: ['えんぴつ', 'まんねんひつ', 'ふで', 'くれよん'],
            ans: 0,
            explain: '鉛筆 (えんぴつ) = 铅笔'
        },
        {
            q: '冷たい',
            sub: '意思是？',
            options: ['热的', '冷的', '温的', '烫的'],
            ans: 1,
            explain: '冷たい (つめたい) = 冷的'
        },
        {
            q: '暑い',
            sub: '读音是？',
            options: ['あつい', 'さむい', 'あたたかい', 'すずしい'],
            ans: 0,
            explain: '暑い (あつい) = 热的（天气）'
        },
        {
            q: '寒い',
            sub: '意思是？',
            options: ['热的', '冷的', '暖的', '凉的'],
            ans: 1,
            explain: '寒い (さむい) = 冷的（天气）'
        },
        {
            q: '友達',
            sub: '读音是？',
            options: ['ともだち', 'ゆうじん', 'しんゆう', 'なかま'],
            ans: 0,
            explain: '友達 (ともだち) = 朋友'
        },
        {
            q: '家族',
            sub: '意思是？',
            options: ['朋友', '同事', '家庭', '亲戚'],
            ans: 2,
            explain: '家族 (かぞく) = 家庭'
        },
        {
            q: '時計',
            sub: '读音是？',
            options: ['とけい', 'すいでんき', 'めざまし', 'かんじ'],
            ans: 0,
            explain: '時計 (とけい) = 钟表'
        },
        
        // 新增语法题（10题）
        {
            q: 'これは私＿＿＿傘です。',
            sub: '选择正确的助词',
            options: ['が', 'の', 'に', 'を'],
            ans: 1,
            explain: 'の 表示所有格，"我的伞"'
        },
        {
            q: '毎日、7時＿＿＿起きます。',
            sub: '选择正确的助词',
            options: ['に', 'で', 'を', 'が'],
            ans: 0,
            explain: 'に 表示具体的时间点'
        },
        {
            q: 'コーヒー＿＿＿飲みます。',
            sub: '选择正确的助词',
            options: ['を', 'が', 'に', 'で'],
            ans: 0,
            explain: 'を 表示动作的对象，"喝咖啡"'
        },
        {
            q: '公園＿＿＿散歩します。',
            sub: '选择正确的助词',
            options: ['で', 'に', 'を', 'へ'],
            ans: 0,
            explain: 'で 表示动作进行的场所'
        },
        {
            q: '私は本＿＿＿読みます。',
            sub: '选择正确的助词',
            options: ['を', 'が', 'に', 'で'],
            ans: 0,
            explain: 'を 表示动作的对象，"读书"'
        },
        {
            q: '私は日本語＿＿＿話します。',
            sub: '选择正确的助词',
            options: ['で', 'に', 'を', 'が'],
            ans: 0,
            explain: 'で 表示使用某种语言'
        },
        {
            q: '駅＿＿＿バスで行きます。',
            sub: '选择正确的助词',
            options: ['へ', 'に', 'で', 'を'],
            ans: 1,
            explain: 'に 表示目的地'
        },
        {
            q: 'りんご＿＿＿バナナが好きです。',
            sub: '选择正确的助词',
            options: ['と', 'や', 'か', 'も'],
            ans: 0,
            explain: 'と 表示完全列举，"苹果和香蕉"'
        },
        {
            q: '私は魚＿＿＿好きではありません。',
            sub: '选择正确的助词',
            options: ['が', 'を', 'に', 'と'],
            ans: 0,
            explain: '～が好きです/好きではありません 表示喜欢/不喜欢'
        },
        {
            q: '父＿＿＿母は家にいます。',
            sub: '选择正确的助词',
            options: ['と', 'や', 'か', 'も'],
            ans: 0,
            explain: 'と 表示完全列举，"爸爸和妈妈"'
        }

	
    ],
    
    'N4': [
        // 基础语法与表达（30题）
        { q: '彼は本を＿＿＿いる。', sub: '选择正确的动词', options: ['読む', '読んで', '読んだ', '読め'], ans: 1, explain: '～ている 表示正在进行，読んでいる (正在读)' },
        { q: '私は昨日映画を＿＿＿。', sub: '选择正确的过去形式', options: ['見る', '見ます', '見た', '見って'], ans: 2, explain: '見た 是見る的过去式' },
        { q: 'このケーキは＿＿＿です。', sub: '选择正确的形容词', options: ['おいしい', 'おいしいい', 'おいしく', 'おいしくて'], ans: 0, explain: 'おいしい (好吃的)' },
        { q: '私はコーヒー＿＿＿飲みません。', sub: '选择正确的助词', options: ['が', 'を', 'に', 'は'], ans: 3, explain: 'は 表示主题，强调我不喝咖啡' },
        { q: '駅＿＿＿歩いて10分です。', sub: '选择正确的助词', options: ['から', 'まで', 'に', 'で'], ans: 0, explain: 'から (从)... 从车站步行10分钟' },
        { q: '明日、図書館＿＿＿勉強します。', sub: '选择正确的助词', options: ['で', 'に', 'を', 'へ'], ans: 0, explain: 'で 表示动作进行的场所' },
        { q: '電話番号を＿＿＿ください。', sub: '选择正确的动词', options: ['言って', '話して', '教えて', '聞いて'], ans: 2, explain: '教えてください (请告诉我)' },
        { q: 'これは私＿＿＿本です。', sub: '选择正确的助词', options: ['の', 'が', 'に', 'を'], ans: 0, explain: 'の 表示所有，我的书' },
        { q: 'そのカバンは＿＿＿ですか。', sub: '选择正确的疑问词', options: ['いくら', 'いつ', 'どこ', 'どれ'], ans: 0, explain: 'いくら (多少钱)' },
        { q: '私は日本語が少し＿＿＿。', sub: '选择正确的表达', options: ['話します', '話せます', '話しています', '話しです'], ans: 1, explain: '話せます (会说)，可能形' },
        { q: '電車が＿＿＿来ました。', sub: '选择正确的副词', options: ['ゆっくり', 'すぐに', 'たまに', 'ほとんど'], ans: 1, explain: 'すぐに (马上，立即)' },
        { q: '＿＿＿寝る前に、歯を磨きます。', sub: '选择正确的表达', options: ['いつも', 'ときどき', 'あまり', 'ぜんぜん'], ans: 0, explain: 'いつも (总是)' },
        { q: '今日は暑い＿＿＿、エアコンをつけましょう。', sub: '选择正确的接续词', options: ['から', 'が', 'でも', 'なら'], ans: 0, explain: 'から (因为)，表示原因' },
        { q: 'この本は＿＿＿読みました。', sub: '选择正确的形式', options: ['まだ', 'もう', 'また', 'まだに'], ans: 1, explain: 'もう (已经)' },
        { q: '昨日は＿＿＿寝ましたか。', sub: '选择正确的疑问词', options: ['どうして', 'いくら', '何時', 'どのぐらい'], ans: 2, explain: '何時 (几点)' },
        { q: '私は魚＿＿＿好きではありません。', sub: '选择正确的助词', options: ['が', 'を', 'に', 'と'], ans: 0, explain: '～が好きです/好きではありません (喜欢/不喜欢)' },
        { q: '昨日、友達＿＿＿電話しました。', sub: '选择正确的助词', options: ['が', 'を', 'に', 'へ'], ans: 2, explain: '～に電話する (给...打电话)' },
        { q: '明日の天気は＿＿＿ですか。', sub: '选择正确的疑问词', options: ['どう', 'どれ', 'どの', 'どんな'], ans: 0, explain: 'どう (怎么样)' },
        { q: 'この部屋は＿＿＿です。', sub: '选择正确的形容词', options: ['暗い', '暗く', '暗いに', '暗いだ'], ans: 0, explain: '暗い (暗的)' },
        { q: 'お金が＿＿＿ありません。', sub: '选择正确的副词', options: ['あまり', 'たくさん', 'とても', 'すこし'], ans: 0, explain: 'あまり～ません (不怎么...)' },
        { q: 'この道を＿＿＿行ってください。', sub: '选择正确的副词', options: ['まっすぐ', 'すぐ', 'ゆっくり', 'ちょっと'], ans: 0, explain: 'まっすぐ (笔直)' },
        { q: '私は弟＿＿＿背が高いです。', sub: '选择正确的助词', options: ['から', 'より', 'まで', 'ほど'], ans: 1, explain: '～より (比...)' },
        { q: '冬は夏＿＿＿寒いです。', sub: '选择正确的助词', options: ['から', 'より', 'まで', 'ほど'], ans: 3, explain: '～ほど～ない (不如...)' },
        { q: '＿＿＿テレビを見ていますか。', sub: '选择正确的疑问词', options: ['どの', 'どれ', 'どんな', 'どうやって'], ans: 3, explain: 'どうやって (如何)' },
        { q: 'ここに名前を＿＿＿ください。', sub: '选择正确的动词', options: ['かく', 'かいて', 'かいた', 'かける'], ans: 1, explain: '～てください (请做...)' },
        { q: '私は毎日7時に＿＿＿。', sub: '选择正确的动词', options: ['起きます', '起きて', '起きた', '起きる'], ans: 0, explain: '起きます (起床)' },
        { q: 'この問題は＿＿＿難しくありません。', sub: '选择正确的副词', options: ['とても', 'あまり', 'たくさん', 'すこし'], ans: 1, explain: 'あまり～ない (不怎么...)' },
        { q: '田中さんは会社＿＿＿帰りました。', sub: '选择正确的助词', options: ['から', 'に', 'で', 'を'], ans: 0, explain: '～から帰る (从...回来)' },
        { q: 'コーヒー＿＿＿紅茶がいいですか。', sub: '选择正确的助词', options: ['と', 'か', 'や', 'も'], ans: 1, explain: '～か～ (...或者...)' },
        { q: '私は京都＿＿＿行ったことがあります。', sub: '选择正确的助词', options: ['が', 'を', 'に', 'へ'], ans: 2, explain: '～に行ったことがある (去过...)' },
		   // 情景对话（新增10题，共50题）
        {
            q: 'A: すみません、この本を借りたいです。 B: ________。',
            sub: '图书馆对话',
            options: ['貸し出しカードはありますか', '何時にしますか', 'いくらですか', 'どこにありますか'],
            ans: 0,
            explain: '図書館で本を借りる時に「貸し出しカードはありますか」と聞かれることが多いです'
        },
        {
            q: 'A: 病院はどこですか？ B: ________。',
            sub: '指路对话',
            options: ['あの白い建物です', '病院へ行きます', '病気になりました', '薬を飲みます'],
            ans: 0,
            explain: '場所を指す時は「あの～です」を使います'
        },
        {
            q: 'A: お腹が空きましたね。 B: ________。',
            sub: '日常对话',
            options: ['そうですね、何か食べましょうか', 'もう寝ましょう', 'まだ早いです', '疲れました'],
            ans: 0,
            explain: '「そうですね」で同意し、「何か食べましょうか」と提案します'
        },
        {
            q: 'A: テストはどうでしたか？ B: ________。',
            sub: '考试对话',
            options: ['難しかったです', 'テストを受けます', '勉強しました', '本を読みました'],
            ans: 0,
            explain: '「どうでしたか」に対する返答として「難しかったです」が適切です'
        },
        {
            q: 'A: 今晩、一緒に食事しませんか？ B: ________。',
            sub: '邀请对话',
            options: ['はい、いいですね', 'すみません、忙しいです', 'どちらでもいいです', 'わかりません'],
            ans: 0,
            explain: '誘いに乗る時は「はい、いいですね」と言います'
        },
        {
            q: 'A: 熱があるみたいです。 B: ________。',
            sub: '健康对话',
            options: ['早く帰って休んだほうがいいですよ', '仕事に行きましょう', 'まだ大丈夫です', '心配ありません'],
            ans: 0,
            explain: '体調が悪い人へのアドバイスとして「休んだほうがいいですよ」が適切です'
        },
        {
            q: 'A: 週末、何をしますか？ B: ________。',
            sub: '周末计划',
            options: ['友達と映画を見に行きます', '週末です', '暇です', '仕事です'],
            ans: 0,
            explain: '週末の予定を答える時は「～に行きます」「～をします」などを使います'
        },
        {
            q: 'A: 遅くなってすみません。 B: ________。',
            sub: '道歉对话',
            options: ['いいえ、大丈夫です', 'はい、遅いです', '困ります', '次は気をつけてください'],
            ans: 0,
            explain: '遅刻の謝罪に対して「いいえ、大丈夫です」と寛容な返事をします'
        },
        {
            q: 'A: この漢字、読み方がわかりません。 B: ________。',
            sub: '学习对话',
            options: ['教えてあげましょうか', '私も知りません', '漢字は難しいです', '本を読みましょう'],
            ans: 0,
            explain: '「教えてあげましょうか」は相手を手伝いたい時の表現です'
        },
        {
            q: 'A: 駅まで歩いてどのぐらいですか？ B: ________。',
            sub: '时间距离',
            options: ['10分ぐらいです', '駅まで行きます', 'バスで行きます', '近いです'],
            ans: 0,
            explain: '時間を答える時は「～分ぐらいです」と言います'
        },
		 // 新增词汇题（10题）
        {
            q: '準備',
            sub: '读音是？',
            options: ['じゅんび', 'ようい', 'せいび', 'びよう'],
            ans: 0,
            explain: '準備 (じゅんび) = 准备'
        },
        {
            q: '約束',
            sub: '意思是？',
            options: ['等待', '约定', '帮助', '拒绝'],
            ans: 1,
            explain: '約束 (やくそく) = 约定'
        },
        {
            q: '親切',
            sub: '意思是？',
            options: ['亲切', '严格', '聪明', '努力'],
            ans: 0,
            explain: '親切 (しんせつ) = 亲切，热心'
        },
        {
            q: '電気',
            sub: '读音是？',
            options: ['でんき', 'でんわ', 'でんしゃ', 'でんとう'],
            ans: 0,
            explain: '電気 (でんき) = 电，电灯'
        },
        {
            q: '注意',
            sub: '意思是？',
            options: ['注意', '警告', '命令', '指示'],
            ans: 0,
            explain: '注意 (ちゅうい) = 注意，小心'
        },
        {
            q: '都合',
            sub: '读音是？',
            options: ['つごう', 'とごう', 'つうこう', 'とうごう'],
            ans: 0,
            explain: '都合 (つごう) = 情况，方便'
        },
        {
            q: '連絡',
            sub: '意思是？',
            options: ['联系', '访问', '等待', '出发'],
            ans: 0,
            explain: '連絡 (れんらく) = 联系'
        },
        {
            q: '迷惑',
            sub: '读音是？',
            options: ['めいわく', 'まよう', 'めんどう', 'まよわく'],
            ans: 0,
            explain: '迷惑 (めいわく) = 麻烦，打扰'
        },
        {
            q: '大切',
            sub: '意思是？',
            options: ['重要', '小心', '正确', '快速'],
            ans: 0,
            explain: '大切 (たいせつ) = 重要，珍贵'
        },
        {
            q: '案内',
            sub: '读音是？',
            options: ['あんない', 'あんしん', 'あんき', 'あんてい'],
            ans: 0,
            explain: '案内 (あんない) = 引导，向导'
        },
        
        // 新增语法题（10题）
        {
            q: 'この本は昨日＿＿＿。',
            sub: '选择正确的动词形式',
            options: ['買いました', '買います', '買いません', '買いませんでした'],
            ans: 0,
            explain: '昨日 表示过去，所以用过去式 買いました'
        },
        {
            q: '明日、映画を＿＿＿。',
            sub: '选择正确的动词形式',
            options: ['見ます', '見ました', '見ません', '見ませんでした'],
            ans: 0,
            explain: '明日 表示将来，所以用现在将来式 見ます'
        },
        {
            q: '毎日、日本語を＿＿＿。',
            sub: '选择正确的动词形式',
            options: ['勉強します', '勉強しました', '勉強しません', '勉強しませんでした'],
            ans: 0,
            explain: '毎日 表示习惯，所以用现在式 勉強します'
        },
        {
            q: '昨日は雨が＿＿＿。',
            sub: '选择正确的动词形式',
            options: ['降りました', '降ります', '降りません', '降りませんでした'],
            ans: 0,
            explain: '昨日 表示过去，所以用过去式 降りました'
        },
        {
            q: 'ここで写真を＿＿＿もいいですか。',
            sub: '选择正确的动词形式',
            options: ['撮って', '撮る', '撮った', '撮ります'],
            ans: 0,
            explain: '～てもいいです 表示允许，"可以..."'
        },
        {
            q: '窓を＿＿＿ください。',
            sub: '选择正确的动词形式',
            options: ['開けて', '開ける', '開けた', '開けます'],
            ans: 0,
            explain: '～てください 表示请求，"请..."'
        },
        {
            q: 'もうこの本を＿＿＿。',
            sub: '选择正确的动词形式',
            options: ['読みました', '読みます', '読みません', '読みませんでした'],
            ans: 0,
            explain: 'もう 表示已经完成，所以用过去式 読みました'
        },
        {
            q: 'まだその映画を＿＿＿。',
            sub: '选择正确的动词形式',
            options: ['見ていません', '見ます', '見ました', '見ません'],
            ans: 0,
            explain: 'まだ～ていません 表示还没做'
        },
        {
            q: 'このケーキは＿＿＿そうです。',
            sub: '选择正确的形容词形式',
            options: ['おいし', 'おいしい', 'おいしく', 'おいしくて'],
            ans: 0,
            explain: '～そうです 表示样态，い形容词去掉い＋そうです'
        },
        {
            q: 'この問題は＿＿＿そうです。',
            sub: '选择正确的形容词形式',
            options: ['難し', '難しい', '難しく', '難しくて'],
            ans: 0,
            explain: '～そうです 表示样态，い形容词去掉い＋そうです'
        }
		
    ],
    
    'N3': [
        // 中级语法与表达（30题）
        { q: '彼女は優しい＿＿＿、時々厳しいです。', sub: '选择正确的接续词', options: ['ながら', 'から', 'ので', 'が'], ans: 3, explain: 'が (但是)，表示转折' },
        { q: '雨が降っている＿＿＿、傘を持っていきましょう。', sub: '选择正确的接续词', options: ['ので', 'のに', 'でも', 'ながら'], ans: 0, explain: 'ので (因为)，表示原因' },
        { q: 'この問題は＿＿＿難しくないと思います。', sub: '选择正确的副词', options: ['そんなに', 'とても', 'すごく', 'たいへん'], ans: 0, explain: 'そんなに (不那么)，后面接否定' },
        { q: '＿＿＿説明しても、わかりませんでした。', sub: '选择正确的表达', options: ['何回', '何回も', '何回か', '何回で'], ans: 1, explain: '何回も (多次)，强调次数多' },
        { q: '試験に合格する＿＿＿、毎日勉強しています。', sub: '选择正确的形式', options: ['ために', 'ように', 'そうに', 'らしい'], ans: 0, explain: 'ために (为了)，表示目的' },
        { q: '彼は遅刻＿＿＿ことがありません。', sub: '选择正确的形式', options: ['する', 'した', 'するの', 'したの'], ans: 1, explain: 'したことがありません (从来没有做过)' },
        { q: 'この小説は＿＿＿読み終わりました。', sub: '选择正确的形式', options: ['やっと', 'まだ', 'もう', 'もっと'], ans: 0, explain: 'やっと (终于)' },
        { q: '＿＿＿練習すれば、上手になりますよ。', sub: '选择正确的表达', options: ['もっと', 'あまり', 'もう', 'ぜんぜん'], ans: 0, explain: 'もっと (更加)' },
        { q: '私が行く＿＿＿、彼が来ました。', sub: '选择正确的接续', options: ['代わりに', 'ために', 'つもりで', 'ばかりに'], ans: 0, explain: '代わりに (代替，而不是)' },
        { q: '彼女は＿＿＿日本に来たばかりです。', sub: '选择正确的副词', options: ['まだ', 'もう', 'さっき', '先週'], ans: 2, explain: 'さっき (刚才)' },
        { q: '＿＿＿遅くなっても、電話してください。', sub: '选择正确的表达', options: ['たとえ', 'もし', 'いくら', 'どんなに'], ans: 0, explain: 'たとえ～ても (即使...也)' },
        { q: 'この薬を飲めば、熱が＿＿＿はずです。', sub: '选择正确的动词', options: ['下がる', '下げる', '下がった', '下げた'], ans: 0, explain: '下がる (下降)，自动词' },
        { q: 'この仕事は私＿＿＿無理です。', sub: '选择正确的助词', options: ['には', 'では', 'とは', 'からは'], ans: 0, explain: '～には (对于...来说)' },
        { q: '＿＿＿忙しくても、食事はきちんととりましょう。', sub: '选择正确的表达', options: ['いくら', 'どんなに', 'たとえ', 'もし'], ans: 1, explain: 'どんなに～ても (无论多么...也)' },
        { q: '彼は日本語が＿＿＿話せます。', sub: '选择正确的副词', options: ['ぺらぺら', 'だんだん', 'どんどん', 'ますます'], ans: 0, explain: 'ぺらぺら (流利地)' },
        { q: 'この本は＿＿＿読むほど面白くなります。', sub: '选择正确的表达', options: ['読む', '読んだ', '読めば', '読んで'], ans: 0, explain: '～ば～ほど (越...越...)' },
        { q: '時間が＿＿＿ので、急ぎましょう。', sub: '选择正确的形容词', options: ['ない', 'なく', 'ないで', 'なくて'], ans: 0, explain: '時間がない (没有时间)' },
        { q: '＿＿＿説明書を読んでから、使ってください。', sub: '选择正确的副词', options: ['必ず', 'たぶん', 'もし', 'ほとんど'], ans: 0, explain: '必ず (一定)' },
        { q: '今日は寒いから、コートを＿＿＿ほうがいいです。', sub: '选择正确的形式', options: ['着る', '着て', '着た', '着ます'], ans: 0, explain: '～たほうがいい (最好做...)' },
        { q: 'この映画は一度＿＿＿ことがあります。', sub: '选择正确的形式', options: ['見る', '見た', '見て', '見'], ans: 1, explain: '～たことがある (曾经...过)' },
        { q: '彼女は病気＿＿＿学校を休みました。', sub: '选择正确的形式', options: ['で', 'に', 'を', 'が'], ans: 0, explain: '～で (表示原因)' },
        { q: 'この問題は子供＿＿＿わかります。', sub: '选择正确的助词', options: ['でも', 'にも', 'へも', 'をも'], ans: 0, explain: '～でも (即使...也)' },
        { q: '彼はまるでプロの＿＿＿上手です。', sub: '选择正确的表达', options: ['ように', 'ような', 'ようだ', 'ようで'], ans: 0, explain: 'まるで～ように (好像...一样)' },
        { q: '＿＿＿明日までにこの仕事を終わらせなければならない。', sub: '选择正确的副词', options: ['どうしても', 'どうも', 'どうか', 'どうやって'], ans: 0, explain: 'どうしても (无论如何)' },
        { q: '彼の話を聞いて、＿＿＿なりました。', sub: '选择正确的副词', options: ['はっきり', 'しっかり', 'すっかり', 'きっかり'], ans: 2, explain: 'すっかり (完全)' },
        { q: 'この薬は食後＿＿＿飲んでください。', sub: '选择正确的助词', options: ['に', 'で', 'を', 'が'], ans: 0, explain: '～に (表示时间点)' },
        { q: '＿＿＿疲れていても、仕事を休めません。', sub: '选择正确的表达', options: ['たとえ', 'もし', 'いくら', 'どんなに'], ans: 3, explain: 'どんなに～ても (无论多么...也)' },
        { q: 'あの人は先生＿＿＿知られています。', sub: '选择正确的助词', options: ['として', 'にとって', 'によって', 'に対して'], ans: 0, explain: '～として (作为...)' },
        { q: 'この問題について、先生＿＿＿相談しました。', sub: '选择正确的助词', options: ['に', 'と', 'で', 'を'], ans: 1, explain: '～と相談する (和...商量)' },
        { q: '私は彼女に手紙を＿＿＿。', sub: '选择正确的动词', options: ['書きました', '書きました', '書きました', '書きました'], ans: 0, explain: '～に手紙を書く (给...写信)' },
		// 情景对话（新增10题，共50题）
        {
            q: 'A: もしもし、山田さんのお宅ですか？ B: はい、________。',
            sub: '电话对话',
            options: ['山田でございますが', '山田ですけど', '山田と申します', '山田ですが'],
            ans: 3,
            explain: '電話で自分の名前を名乗る時は「～ですが」が一般的です'
        },
        {
            q: 'A: こちらの商品、少し傷がありますが…。 B: ________。',
            sub: '商店对话',
            options: ['では、値引きさせていただきます', 'それは仕方ありません', '返品できますか', '修理してください'],
            ans: 0,
            explain: '傷がある商品に対して店員が値引きを提案する表現です'
        },
        {
            q: 'A: 来週の会議、出席できますか？ B: 申し訳ありません、________。',
            sub: '工作对话',
            options: ['予定が入っております', '出席します', '大丈夫です', 'わかりました'],
            ans: 0,
            explain: '丁寧に欠席の理由を伝える表現です'
        },
        {
            q: 'A: この書類、至急お願いできますか？ B: ________。',
            sub: '商务对话',
            options: ['かしこまりました', 'わかりません', '後でします', '面倒です'],
            ans: 0,
            explain: '「かしこまりました」は丁寧な承諾の表現です'
        },
        {
            q: 'A: この企画について、何かご意見は？ B: ________。',
            sub: '会议对话',
            options: ['一つ提案があるのですが', '特にありません', 'どうでもいいです', 'わからないです'],
            ans: 0,
            explain: '会議で意見を述べる時の前置きとして「一つ提案があるのですが」が適切です'
        },
        {
            q: 'A: すみません、この機械の使い方がわからないんですが。 B: ________。',
            sub: '求助对话',
            options: ['では、ご説明いたします', '自分で調べてください', '難しいですね', '私もわかりません'],
            ans: 0,
            explain: '丁寧に説明を申し出る表現です'
        },
        {
            q: 'A: お客様、お支払いは現金とカード、どちらがよろしいですか？ B: ________。',
            sub: '购物对话',
            options: ['カードでお願いします', 'お金がありません', '後で払います', '高いですね'],
            ans: 0,
            explain: '支払い方法を選択する時の表現です'
        },
        {
            q: 'A: この商品、返品したいんですが。 B: ________。',
            sub: '退货对话',
            options: ['レシートはお持ちですか', 'だめです', 'なぜですか', '困ります'],
            ans: 0,
            explain: '返品手続きで最初に確認することはレシートの有無です'
        },
        {
            q: 'A: 明日の天気、どうなると思いますか？ B: ________。',
            sub: '天气对话',
            options: ['天気予報では雨が降るそうです', '晴れるでしょう', 'わからないです', '気にしません'],
            ans: 0,
            explain: '「～そうです」を使って伝聞の情報を伝えます'
        },
        {
            q: 'A: この問題、どうやって解決すればいいでしょうか。 B: ________。',
            sub: '建议对话',
            options: ['まずは原因を調べてみてはどうですか', '諦めましょう', '知りません', '自分で考えてください'],
            ans: 0,
            explain: '「～てはどうですか」を使って提案する表現です'
        },
		// 新增词汇题（10题）
        {
            q: '確認',
            sub: '读音是？',
            options: ['かくにん', 'かくてい', 'はんてい', 'にんてい'],
            ans: 0,
            explain: '確認 (かくにん) = 确认'
        },
        {
            q: '調整',
            sub: '意思是？',
            options: ['调整', '调查', '调节', '整理'],
            ans: 0,
            explain: '調整 (ちょうせい) = 调整'
        },
        {
            q: '検討',
            sub: '意思是？',
            options: ['讨论', '检查', '研究', '探讨'],
            ans: 2,
            explain: '検討 (けんとう) = 研究，探讨'
        },
        {
            q: '実施',
            sub: '读音是？',
            options: ['じっし', 'じっしつ', 'じつし', 'じつしつ'],
            ans: 0,
            explain: '実施 (じっし) = 实施'
        },
        {
            q: '有効',
            sub: '意思是？',
            options: ['有效', '有用', '有利', '有益'],
            ans: 0,
            explain: '有効 (ゆうこう) = 有效'
        },
        {
            q: '具体的',
            sub: '读音是？',
            options: ['ぐたいてき', 'くたいてき', 'ぐたいてき', 'くたいてき'],
            ans: 0,
            explain: '具体的 (ぐたいてき) = 具体的'
        },
        {
            q: '可能',
            sub: '意思是？',
            options: ['可能', '能力', '能够', '可以'],
            ans: 0,
            explain: '可能 (かのう) = 可能'
        },
        {
            q: '直接',
            sub: '读音是？',
            options: ['ちょくせつ', 'ちょっせつ', 'じかせつ', 'じきせつ'],
            ans: 0,
            explain: '直接 (ちょくせつ) = 直接'
        },
        {
            q: '実際',
            sub: '意思是？',
            options: ['实际', '现实', '真实', '事实'],
            ans: 0,
            explain: '実際 (じっさい) = 实际'
        },
        {
            q: '目的',
            sub: '读音是？',
            options: ['もくてき', 'もくひょう', 'めてき', 'めひょう'],
            ans: 0,
            explain: '目的 (もくてき) = 目的'
        },
		 // 新增语法题（10题）
        {
            q: 'この問題は難し＿＿＿、時間がかかります。',
            sub: '选择正确的接续形式',
            options: ['すぎて', 'がちで', 'っぽくて', 'めいて'],
            ans: 0,
            explain: '～すぎて 表示"过于...以至于"'
        },
        {
            q: '彼は遅刻＿＿＿です。',
            sub: '选择正确的接续形式',
            options: ['がち', 'っぽい', 'めく', 'すぎ'],
            ans: 0,
            explain: '～がち 表示有某种倾向'
        },
		 {
            q: 'この説明書は複雑＿＿＿。',
            sub: '选择正确的接续形式',
            options: ['っぽい', 'っぽいです', 'めく', 'めきます'],
            ans: 1,
            explain: '～っぽい 表示有某种感觉或倾向'
        },
		{
            q: '彼の話は本当＿＿＿。',
            sub: '选择正确的接续形式',
            options: ['らしい', 'ようだ', 'そうだ', 'みたいだ'],
            ans: 0,
            explain: '～らしい 表示有根据的推断'
        },
        {
            q: '雨が降り＿＿＿。',
            sub: '选择正确的接续形式',
            options: ['そうだ', 'ようだ', 'らしい', 'みたいだ'],
            ans: 0,
            explain: '～そうだ 表示样态，看起来要...'
        },
        {
            q: 'この料理は日本料理＿＿＿。',
            sub: '选择正确的接续形式',
            options: ['みたいだ', 'ようだ', 'らしい', 'そうだ'],
            ans: 0,
            explain: '～みたいだ 表示比喻或举例'
        },
        {
            q: '彼女はまるで子供＿＿＿行動する。',
            sub: '选择正确的接续形式',
            options: ['のように', 'のような', 'らしく', 'そうに'],
            ans: 0,
            explain: '～のように 表示比喻，"像...一样"'
        },
        {
            q: 'この問題は私＿＿＿簡単だ。',
            sub: '选择正确的接续形式',
            options: ['にとって', 'に対して', 'について', 'によって'],
            ans: 0,
            explain: '～にとって 表示"对于...来说"'
        },
        {
            q: 'この規則は学生＿＿＿守らなければならない。',
            sub: '选择正确的接续形式',
            options: ['によって', 'に対して', 'について', 'にとって'],
            ans: 0,
            explain: '～によって 表示"根据..."'
        },
        {
            q: '彼の意見は会議＿＿＿重要だ。',
            sub: '选择正确的接续形式',
            options: ['において', 'について', 'に対して', 'にとって'],
            ans: 0,
            explain: '～において 表示"在...方面"'
        }
    ],
    
    'N2': [
        // 上级语法与表达（30题）
        { q: '彼の話を聞く＿＿＿、涙が出てきた。', sub: '选择正确的形式', options: ['につれて', 'とともに', 'たびに', 'あまり'], ans: 3, explain: '～のあまり (由于过于...)' },
        { q: '努力した＿＿＿、いい結果が出なかった。', sub: '选择正确的接续', options: ['わりに', 'くせに', 'のに', 'ものの'], ans: 2, explain: 'のに (尽管...却)' },
        { q: 'この計画は失敗に＿＿＿＿。', sub: '选择正确的表达', options: ['終わった', '決まった', '違いない', '限らない'], ans: 2, explain: 'に違いない (一定，肯定)' },
        { q: '彼の表情＿＿＿、何か悪い知らせだったようだ。', sub: '选择正确的表达', options: ['からして', 'からには', 'からこそ', 'からといって'], ans: 0, explain: 'からして (从...来看)' },
        { q: 'この仕事は経験＿＿＿募集しています。', sub: '选择正确的接续', options: ['をめぐって', 'を問わず', 'をはじめ', 'をこめて'], ans: 1, explain: 'を問わず (不问，不论)' },
        { q: '彼女はどんな困難＿＿＿、あきらめない。', sub: '选择正确的表达', options: ['にしても', 'にせよ', 'にしろ', 'にしたって'], ans: 1, explain: 'にせよ (即使，无论)' },
        { q: '彼の成功は努力の＿＿＿。', sub: '选择正确的表达', options: ['せいだ', 'おかげだ', 'ためだ', 'ものだ'], ans: 1, explain: 'おかげだ (多亏了)' },
        { q: 'この問題は専門家＿＿＿わからない。', sub: '选择正确的表达', options: ['でなければ', 'でなくても', 'であっても', 'であると'], ans: 2, explain: 'であっても (即使是...也)' },
        { q: '彼女の説明は複雑＿＿＿で、よくわからなかった。', sub: '选择正确的接续', options: ['すぎ', 'がち', 'めく', 'っぽい'], ans: 0, explain: 'すぎ (过于...)' },
        { q: 'この件については上司の指示＿＿＿行動する。', sub: '选择正确的表达', options: ['に沿って', 'に基づいて', 'に応じて', 'にしたがって'], ans: 0, explain: 'に沿って (按照，沿着)' },
        { q: '彼は約束の時間に＿＿＿来なかった。', sub: '选择正确的副词', options: ['ついに', '結局', '結局のところ', '最後まで'], ans: 1, explain: '結局 (结果，最终)' },
        { q: 'この法律は来月から＿＿＿。', sub: '选择正确的表达', options: ['施行される', '実施される', '実行される', '実現される'], ans: 0, explain: '施行される (被施行，法律用语)' },
        { q: '雨が＿＿＿、試合は中止になるだろう。', sub: '选择正确的表达', options: ['降ると', '降ったら', '降れば', '降るなら'], ans: 1, explain: '～たら (如果...的话)' },
        { q: '彼の意見は会議で＿＿＿された。', sub: '选择正确的动词', options: ['取り上げる', '取り上げた', '取り上げられた', '取り上げさせる'], ans: 2, explain: '取り上げられた (被采纳)' },
        { q: 'この問題は＿＿＿解決しなければならない。', sub: '选择正确的副词', options: ['早速', '早く', '速く', '早急に'], ans: 3, explain: '早急に (紧急地)' },
        { q: '彼女は優しい＿＿＿、しっかりしたところもある。', sub: '选择正确的接续', options: ['一方で', '反面', 'に対して', 'にかわって'], ans: 0, explain: '一方で (另一方面)' },
        { q: '今回の失敗は彼の経験不足＿＿＿。', sub: '选择正确的表达', options: ['に限る', 'に違いない', 'にすぎない', 'にほかならない'], ans: 3, explain: 'にほかならない (无非是)' },
        { q: 'この商品は若者＿＿＿人気がある。', sub: '选择正确的助词', options: ['に対して', 'にとって', 'において', 'にかけて'], ans: 0, explain: '～に対して (对于...)' },
        { q: '彼の説明は詳しい＿＿＿、わかりにくい。', sub: '选择正确的接续', options: ['わりに', 'くせに', 'のに', 'ものの'], ans: 0, explain: 'わりに (虽然...但是)' },
        { q: '＿＿＿練習すれば、必ず上手になります。', sub: '选择正确的副词', options: ['しっかり', 'はっきり', 'きっちり', 'すっかり'], ans: 0, explain: 'しっかり (扎实地)' },
        { q: '彼はこの問題を＿＿＿考えている。', sub: '选择正确的副词', options: ['真剣に', '本当に', '実際に', '実に'], ans: 0, explain: '真剣に (认真地)' },
        { q: 'この計画は成功する＿＿＿。', sub: '选择正确的表达', options: ['わけだ', 'はずだ', 'つもりだ', 'そうだ'], ans: 1, explain: 'はずだ (应该)' },
        { q: '彼の話は事実＿＿＿相違がある。', sub: '选择正确的表达', options: ['と', 'に', 'で', 'を'], ans: 1, explain: '～と相違がある (与...有差异)' },
        { q: 'この件は彼に＿＿＿ください。', sub: '选择正确的动词', options: ['任せて', '任せる', '任された', '任せられる'], ans: 0, explain: '～に任せる (委托给...)' },
        { q: '＿＿＿努力したのに、結果が出なかった。', sub: '选择正确的副词', options: ['せっかく', 'わざわざ', 'たまたま', '偶然'], ans: 0, explain: 'せっかく (特意，好不容易)' },
        { q: '彼の態度はまるで自分が悪くない＿＿＿。', sub: '选择正确的表达', options: ['ようだ', 'そうだ', 'らしい', 'みたいだ'], ans: 0, explain: 'ようだ (好像)' },
        { q: 'この問題は彼なら＿＿＿できるだろう。', sub: '选择正确的副词', options: ['きっと', 'たぶん', 'おそらく', '確かに'], ans: 0, explain: 'きっと (一定)' },
        { q: '彼女は＿＿＿病気で入院した。', sub: '选择正确的副词', options: ['急に', '突然', 'いきなり', '不意に'], ans: 0, explain: '急に (突然)' },
        { q: 'この件についてはさらに＿＿＿必要がある。', sub: '选择正确的动词', options: ['検討する', '検討した', '検討している', '検討される'], ans: 0, explain: '検討する (讨论，研究)' },
        { q: '彼の意見は会議で＿＿＿反対された。', sub: '选择正确的副词', options: ['強く', '大きく', '深く', '高く'], ans: 0, explain: '強く反対する (强烈反对)' },
		 // 情景对话（新增10题，共50题）
        {
            q: 'A: 今回のプロジェクト、山田さんにリーダーを任せようと思うんですが。 B: ________。',
            sub: '工作对话',
            options: ['彼なら適任だと思います', '無理でしょう', '誰でもいいです', '私がやりたいです'],
            ans: 0,
            explain: '適任（てきにん）＝適任であるという評価を述べる表現です'
        },
        {
            q: 'A: この企画書、もう一度見直したほうがいいんじゃないですか？ B: ________。',
            sub: '商务对话',
            options: ['確かに、いくつか修正点がありますね', 'これで完璧です', '時間がありません', '面倒です'],
            ans: 0,
            explain: '相手の提案を受け入れつつ、同意を示す表現です'
        },
        {
            q: 'A: 部長、急なことで申し訳ありませんが、明日の会議、欠席させていただけませんか。 B: ________。',
            sub: '工作请假',
            options: ['了解しました。では、次回出席をお願いします', 'だめです', '自由にしてください', '理由は何ですか'],
            ans: 0,
            explain: '上司が部下の欠席を許可し、次回を期待する表現です'
        },
        {
            q: 'A: この商品、市場で受け入れられるかどうか心配です。 B: ________。',
            sub: '商务讨论',
            options: ['事前に市場調査を実施することをお勧めします', '大丈夫でしょう', '諦めましょう', '誰も買わないでしょう'],
            ans: 0,
            explain: '「～ことをお勧めします」は丁寧な提案の表現です'
        },
        {
            q: 'A: 来期の営業目標について、何かご意見は？ B: ________。',
            sub: '会议讨论',
            options: ['現状を考慮すると、少し高すぎるように思います', '問題ありません', 'どうでもいいです', '達成できます'],
            ans: 0,
            explain: '「～ように思います」を使って控えめに意見を述べる表現です'
        },
        {
            q: 'A: この問題、どう対処すべきか悩んでいます。 B: ________。',
            sub: '工作咨询',
            options: ['一度、関連部署と協議されてはいかがでしょうか', '私に任せてください', '知りません', '難しいですね'],
            ans: 0,
            explain: '「～されてはいかがでしょうか」は丁寧な提案表現です'
        },
        {
            q: 'A: この契約書、条項に不明確な点があるような気がします。 B: ________。',
            sub: '法律对话',
            options: ['では、弁護士に確認を取るべきかもしれません', '大丈夫です', '気にしすぎです', 'そのままにしましょう'],
            ans: 0,
            explain: '「～べきかもしれません」は控えめに提案する表現です'
        },
        {
            q: 'A: 今回のミス、二度と繰り返さないようにします。 B: ________。',
            sub: '道歉与回应',
            options: ['では、今回に限り見逃しますが、次からは注意してください', '許しません', 'もう遅いです', 'どうでもいいです'],
            ans: 0,
            explain: '寛大な対応を示しつつ、今後の注意を促す表現です'
        },
        {
            q: 'A: この企画、予算オーバーしそうなんです。 B: ________。',
            sub: '预算讨论',
            options: ['では、どこかでコスト削減できないか検討しましょう', '仕方ありません', '予算を増やしましょう', '諦めましょう'],
            ans: 0,
            explain: '問題解決のために具体的な行動を提案する表現です'
        },
        {
            q: 'A: 新しいシステムの導入について、社員からの反応が心配です。 B: ________。',
            sub: '组织变革',
            options: ['事前に説明会を開いて理解を求めてはどうでしょう', '強制すればいいです', '反対する人はいないでしょう', '気にしなくていいです'],
            ans: 0,
            explain: '「～てはどうでしょう」を使って丁寧に提案する表現です'
        },
		// 新增词汇题（10题）
        {
            q: '適用',
            sub: '读音是？',
            options: ['てきよう', 'てっきょう', 'できよう', 'でっきょう'],
            ans: 0,
            explain: '適用 (てきよう) = 适用，应用'
        },
        {
            q: '徹底',
            sub: '意思是？',
            options: ['彻底', '到底', '完全', '充分'],
            ans: 0,
            explain: '徹底 (てってい) = 彻底'
        },
        {
            q: '妥当',
            sub: '意思是？',
            options: ['妥当', '适当', '正确', '合理'],
            ans: 0,
            explain: '妥当 (だとう) = 妥当，恰当'
        },
        {
            q: '把握',
            sub: '读音是？',
            options: ['はあく', 'はくあ', 'ばあく', 'ばくあ'],
            ans: 0,
            explain: '把握 (はあく) = 把握，掌握'
        },
        {
            q: '発揮',
            sub: '意思是？',
            options: ['发挥', '发展', '发现', '发明'],
            ans: 0,
            explain: '発揮 (はっき) = 发挥'
        },
        {
            q: '波及',
            sub: '读音是？',
            options: ['はきゅう', 'はっきゅう', 'ばきゅう', 'ばっきゅう'],
            ans: 0,
            explain: '波及 (はきゅう) = 波及，影响'
        },
        {
            q: '反映',
            sub: '意思是？',
            options: ['反映', '反应', '反射', '反响'],
            ans: 0,
            explain: '反映 (はんえい) = 反映'
        },
        {
            q: '批判',
            sub: '读音是？',
            options: ['ひはん', 'ひばん', 'しはん', 'しばん'],
            ans: 0,
            explain: '批判 (ひはん) = 批判，批评'
        },
        {
            q: '評価',
            sub: '意思是？',
            options: ['评价', '估价', '评估', '评论'],
            ans: 0,
            explain: '評価 (ひょうか) = 评价'
        },
        {
            q: '変革',
            sub: '读音是？',
            options: ['へんかく', 'へんがく', 'へんか', 'へんが'],
            ans: 0,
            explain: '変革 (へんかく) = 变革'
        },
        
        // 新增语法题（10题）
        {
            q: 'この計画は失敗＿＿＿＿。',
            sub: '选择正确的表达',
            options: ['に相違ない', 'に限らない', 'に過ぎない', 'に違いない'],
            ans: 3,
            explain: 'に違いない 表示"一定..."'
        },
        {
            q: '彼の説明は事実＿＿＿。',
            sub: '选择正确的表达',
            options: ['に基づいている', 'に沿っている', 'に応じている', 'に従っている'],
            ans: 0,
            explain: 'に基づいている 表示"基于..."'
        },
        {
            q: 'この規則は全員＿＿＿守らなければならない。',
            sub: '选择正确的表达',
            options: ['にわたって', 'にかかわらず', 'に限らず', 'に応じて'],
            ans: 1,
            explain: 'にかかわらず 表示"不论..."'
        },
        {
            q: 'この問題は年齢＿＿＿誰でも参加できる。',
            sub: '选择正确的表达',
            options: ['を問わず', 'をめぐって', 'をこめて', 'をはじめ'],
            ans: 0,
            explain: 'を問わず 表示"不问..."'
        },
        {
            q: '彼の意見は会議＿＿＿重要だ。',
            sub: '选择正确的表达',
            options: ['において', 'について', 'に対して', 'にとって'],
            ans: 0,
            explain: 'において 表示"在...方面"'
        },
        {
            q: 'この作品は作者の人生観＿＿＿描かれている。',
            sub: '选择正确的表达',
            options: ['にそって', 'にしたがって', 'にこたえて', 'に即して'],
            ans: 3,
            explain: 'に即して 表示"根据..."'
        },
        {
            q: '彼の発言は議題＿＿＿。',
            sub: '选择正确的表达',
            options: ['からはずれた', 'からとびだした', 'からみて', 'からして'],
            ans: 0,
            explain: 'からはずれた 表示"偏离了..."'
        },
        {
            q: 'この政策は国民の支持＿＿＿実施された。',
            sub: '选择正确的表达',
            options: ['をうけて', 'をへて', 'をふまえて', 'をこめて'],
            ans: 2,
            explain: 'をふまえて 表示"基于..."'
        },
        {
            q: '彼の説明は専門的＿＿＿難解だ。',
            sub: '选择正确的表达',
            options: ['すぎて', 'がちで', 'めいて', 'っぽくて'],
            ans: 2,
            explain: 'めいて 表示"带有...的样子"'
        },
        {
            q: 'この案件は慎重な対応＿＿＿。',
            sub: '选择正确的表达',
            options: ['がのぞまれる', 'がかんがえられる', 'がみこまれる', 'がもとめられる'],
            ans: 3,
            explain: 'がもとめられる 表示"被要求"'
        }
    ],
    
    'N1': [
        // 高级语法与表达（30题）
        { q: '彼の発言は事実＿＿＿ものがある。', sub: '选择正确的表达', options: ['をよそに', 'をものともせず', 'をかぎりに', 'をしりめに'], ans: 1, explain: 'をものともせず (不把...当回事)' },
        { q: '彼の態度は反省の色＿＿＿。', sub: '选择正确的表达', options: ['がみえる', 'がみられる', 'をみせない', 'をみえない'], ans: 2, explain: '色をみせない (不显露...的样子)' },
        { q: '彼女の努力は＿＿＿、ついに成功を収めた。', sub: '选择正确的表达', options: ['むなしく', 'むしろ', 'むろん', 'むりに'], ans: 0, explain: 'むなしく (徒劳地)，后面常接否定或转折' },
        { q: 'この問題は専門家の間＿＿＿意見が分かれている。', sub: '选择正确的表达', options: ['において', 'にかけて', 'にわたって', 'にこたえて'], ans: 0, explain: 'において (在...方面，在...中)' },
        { q: '彼の行動は常識＿＿＿ものである。', sub: '选择正确的表达', options: ['をこえた', 'をぬきにした', 'をめぐる', 'をものともしない'], ans: 0, explain: 'をこえた (超越)' },
        { q: 'この作品は作者の人生観＿＿＿描かれている。', sub: '选择正确的表达', options: ['にそって', 'にしたがって', 'にこたえて', 'に即して'], ans: 3, explain: 'に即して (根据，按照)' },
        { q: '彼の発言は議題＿＿＿ものだった。', sub: '选择正确的表达', options: ['からはずれた', 'からとびだした', 'からみて', 'からして'], ans: 0, explain: 'からはずれた (偏离)' },
        { q: 'この政策は国民の支持＿＿＿実施された。', sub: '选择正确的表达', options: ['をうけて', 'をへて', 'をふまえて', 'をこめて'], ans: 2, explain: 'をふまえて (基于，根据)' },
        { q: '彼の説明は専門的＿＿＿難解だ。', sub: '选择正确的表达', options: ['すぎて', 'がちで', 'めいて', 'っぽくて'], ans: 2, explain: 'めいて (带有...的样子，像...似的)' },
        { q: 'この案件は慎重な対応＿＿＿。', sub: '选择正确的表达', options: ['がのぞまれる', 'がかんがえられる', 'がみこまれる', 'がもとめられる'], ans: 3, explain: 'がもとめられる (被要求)' },
        { q: '彼の行動は規則＿＿＿ものである。', sub: '选择正确的表达', options: ['にかなった', 'にそむいた', 'にのっとった', 'にたいした'], ans: 1, explain: 'にそむいた (违反)' },
        { q: 'この問題の解決には時間＿＿＿。', sub: '选择正确的表达', options: ['をまつ', 'がまつ', 'をようする', 'をよぎなくされる'], ans: 2, explain: 'をようする (需要，花费)' },
        { q: '彼の提案は会議で＿＿＿された。', sub: '选择正确的动词', options: ['否決する', '否決した', '否決された', '否決させる'], ans: 2, explain: '否決された (被否决)' },
        { q: 'この問題は＿＿＿解決が望まれる。', sub: '选择正确的副词', options: ['早期', '早急', '迅速', '速やかな'], ans: 3, explain: '速やかな (迅速的)' },
        { q: '彼の説明は矛盾＿＿＿。', sub: '选择正确的表达', options: ['に富んでいる', 'に乏しい', 'をきたす', 'を招く'], ans: 0, explain: 'に富んでいる (富含，充满)' },
        { q: 'この政策は国民の生活＿＿＿影響を与えた。', sub: '选择正确的助词', options: ['に', 'で', 'を', 'が'], ans: 0, explain: '～に影響を与える (给...带来影响)' },
        { q: '彼の意見は＿＿＿考慮すべきだ。', sub: '选择正确的副词', options: ['十分', '充分', '十分に', '充分に'], ans: 2, explain: '十分に (充分地)' },
        { q: 'この問題は＿＿＿検討が必要だ。', sub: '选择正确的副词', options: ['改めて', '再度', 'もう一度', '再度に'], ans: 0, explain: '改めて (重新)' },
        { q: '彼の発言は事態を＿＿＿させた。', sub: '选择正确的动词', options: ['悪化する', '悪化させる', '悪化した', '悪化されて'], ans: 1, explain: '～を悪化させる (使...恶化)' },
        { q: 'この計画は＿＿＿実施される予定だ。', sub: '选择正确的副词', options: ['順次', '次第', '順番に', '次々に'], ans: 0, explain: '順次 (依次)' },
        { q: '彼の行動は規則に＿＿＿。', sub: '选择正确的动词', options: ['違反する', '違反した', '違反している', '違反される'], ans: 1, explain: '～に違反する (违反...)' },
        { q: 'この問題は＿＿＿解決されなければならない。', sub: '选择正确的副词', options: ['根本的に', '基本的に', '原則的に', '一般的に'], ans: 0, explain: '根本的に (根本地)' },
        { q: '彼の説明は事実＿＿＿。', sub: '选择正确的表达', options: ['と異なる', 'と違う', 'と相違する', 'と一致しない'], ans: 3, explain: 'と一致しない (与...不一致)' },
        { q: 'この政策は国民の利益＿＿＿。', sub: '选择正确的表达', options: ['にかなう', 'に反する', 'に沿う', 'に基づく'], ans: 1, explain: 'に反する (违反，违背)' },
        { q: '彼の行動は常識＿＿＿。', sub: '选择正确的表达', options: ['を欠く', 'を欠いている', 'が欠ける', 'が欠けている'], ans: 1, explain: 'を欠いている (缺乏)' },
        { q: 'この問題は＿＿＿検討の余地がある。', sub: '选择正确的副词', options: ['さらに', 'もっと', 'いっそう', 'より一層'], ans: 0, explain: 'さらに (进一步)' },
        { q: '彼の発言は問題の本質＿＿＿。', sub: '选择正确的表达', options: ['をついている', 'を突いている', 'に触れている', 'に関わっている'], ans: 1, explain: 'を突いている (击中要害)' },
        { q: 'この計画は＿＿＿実施されなければならない。', sub: '选择正确的副词', options: ['確実に', '確かに', '確実', '確実な'], ans: 0, explain: '確実に (确实地)' },
        { q: '彼の意見は会議で＿＿＿支持された。', sub: '选择正确的副词', options: ['広く', '大きく', '深く', '高く'], ans: 0, explain: '広く支持される (被广泛支持)' },
        { q: 'この問題は＿＿＿解決が求められている。', sub: '选择正确的副词', options: ['早期', '早急な', '迅速な', '速やかな'], ans: 3, explain: '速やかな (迅速的)' },
		// 情景对话（新增10题，共50题）
		{
            q: 'A: このたびはご子息のご結婚、誠におめでとうございます。 B: ________。',
            sub: '正式祝贺',
            options: ['お心遣い誠にありがとうございます', '大したことではありません', 'まだまだです', '当然です'],
            ans: 0,
            explain: '「お心遣い誠にありがとうございます」は感謝の気持ちを丁寧に表す表現です'
        },
        {
            q: 'A: 今回の件につきましては、当社の不手際が原因と存じます。 B: ________。',
            sub: '商务道歉',
            options: ['今後の再発防止に努めていただければと存じます', '許しません', '弁償してください', 'どうでもいいです'],
            ans: 0,
            explain: '「～ていただければと存じます」は丁寧なお願いの表現です'
        },
        {
            q: 'A: 貴社との契約更新について、条件面で若干の調整をさせていただけないでしょうか。 B: ________。',
            sub: '商务谈判',
            options: ['では、具体的にどのような点でしょうか', 'だめです', 'そのままにしましょう', '時間がありません'],
            ans: 0,
            explain: '相手の提案に対して具体的な内容を尋ねる表現です'
        },
        {
            q: 'A: この案件、法的リスクが懸念されます。 B: ________。',
            sub: '法律咨询',
            options: ['では、専門の法律顧問にご相談されることをお勧めいたします', '気にしすぎです', '大丈夫です', '私の知るところではありません'],
            ans: 0,
            explain: '「～されることをお勧めいたします」は非常に丁寧な提案表現です'
        },
        {
            q: 'A: この企画、経営陣の賛同を得るのは難しいかもしれません。 B: ________。',
            sub: '组织内调整',
            options: ['それならば、もう一度プレゼンテーションの内容を見直してみてはいかがでしょう', '諦めましょう', '強行突破しましょう', '問題ありません'],
            ans: 0,
            explain: '「～てはいかがでしょう」は丁寧な提案の表現で、ビジネスシーンでよく使われます'
        },
        {
            q: 'A: 国際的な市場動向を鑑みると、この戦略の見直しが必要かもしれません。 B: ________。',
            sub: '战略讨论',
            options: ['ご指摘の通り、早急に検討すべき課題と認識しております', 'その必要はありません', '過剰反応です', 'もう手遅れです'],
            ans: 0,
            explain: '「ご指摘の通り」で相手の意見を認め、「認識しております」で理解を示す表現です'
        },
        {
            q: 'A: 取引先から苦情が寄せられており、対応に追われております。 B: ________。',
            sub: '危机管理',
            options: ['何かお手伝いできることがございましたら、お申し付けください', '自己責任です', '大変ですね', '知りませんでした'],
            ans: 0,
            explain: '「お申し付けください」は「言ってください」の非常に丁寧な表現です'
        },
        {
            q: 'A: このプロジェクト、予算超過の可能性が高いと試算されています。 B: ________。',
            sub: '项目管理',
            options: ['それでは、プロジェクトスコープの再定義が必要かもしれません', '仕方ありません', '予算を増額しましょう', '諦めるしかありません'],
            ans: 0,
            explain: '「～かもしれません」は控えめな断定で、ビジネスで好まれる表現です'
        },
        {
            q: 'A: 新しい規制の施行により、ビジネスモデルの変更が迫られています。 B: ________。',
            sub: '法规应对',
            options: ['当社といたしましても、法務部門と連携し対応を検討しているところです', 'どうしようもありません', '違反しても構いません', '無視しましょう'],
            ans: 0,
            explain: '「いたしまして」は「して」の謙譲語で、「～ているところです」は現在進行中の行動を表します'
        },
        {
            q: 'A: この合併案件、競争当局の承認が得られるか不透明な状況です。 B: ________。',
            sub: '企业并购',
            options: ['それでは、承認を得るための戦略的アプローチを早急に練る必要がありますね', '運任せです', '諦めましょう', '強行突破です'],
            ans: 0,
            explain: '「練る必要がありますね」は一緒に考えようとする協調的な表現です'
        },
		 // 新增词汇题（10题）
        {
            q: '齟齬',
            sub: '读音是？',
            options: ['そご', 'しゅご', 'そくご', 'しゅくご'],
            ans: 0,
            explain: '齟齬 (そご) = 龃龉，分歧'
        },
        {
            q: '緻密',
            sub: '意思是？',
            options: ['精密', '详细', '细致', '周密'],
            ans: 0,
            explain: '緻密 (ちみつ) = 精密，细致'
        },
        {
            q: '遵守',
            sub: '意思是？',
            options: ['遵守', '遵从', '服从', '执行'],
            ans: 0,
            explain: '遵守 (じゅんしゅ) = 遵守'
        },
        {
            q: '醸成',
            sub: '读音是？',
            options: ['じょうせい', 'じょうせい', 'じょうせい', 'じょうせい'],
            ans: 0,
            explain: '醸成 (じょうせい) = 酿成，形成'
        },
        {
            q: '乖離',
            sub: '意思是？',
            options: ['乖离', '偏离', '分离', '背离'],
            ans: 0,
            explain: '乖離 (かいり) = 乖离，背离'
        },
        {
            q: '俯瞰',
            sub: '读音是？',
            options: ['ふかん', 'ふがん', 'ふうかん', 'ふうがん'],
            ans: 0,
            explain: '俯瞰 (ふかん) = 俯瞰'
        },
        {
            q: '毀誉褒貶',
            sub: '意思是？',
            options: ['褒贬不一', '毁誉参半', '批评赞美', '评价不一'],
            ans: 1,
            explain: '毀誉褒貶 (きよほうへん) = 毁誉参半'
        },
        {
            q: '邂逅',
            sub: '读音是？',
            options: ['かいこう', 'かいごう', 'かいこう', 'かいごう'],
            ans: 0,
            explain: '邂逅 (かいこう) = 邂逅，偶遇'
        },
        {
            q: '恣意',
            sub: '意思是？',
            options: ['任意', '随意', '故意', '任意性'],
            ans: 1,
            explain: '恣意 (しい) = 随意，任意'
        },
        {
            q: '憧憬',
            sub: '读音是？',
            options: ['どうけい', 'とうけい', 'どうきょう', 'とうきょう'],
            ans: 0,
            explain: '憧憬 (どうけい) = 憧憬'
        },
        
        // 新增语法题（10题）
        {
            q: '彼の発言は事実＿＿＿ものがある。',
            sub: '选择正确的表达',
            options: ['をよそに', 'をものともせず', 'をかぎりに', 'をしりめに'],
            ans: 1,
            explain: 'をものともせず 表示"不把...当回事"'
        },
        {
            q: '彼の態度は反省の色＿＿＿。',
            sub: '选择正确的表达',
            options: ['がみえる', 'がみられる', 'をみせない', 'をみえない'],
            ans: 2,
            explain: '色をみせない 表示"不显露...的样子"'
        },
        {
            q: '彼女の努力は＿＿＿、ついに成功を収めた。',
            sub: '选择正确的表达',
            options: ['むなしく', 'むしろ', 'むろん', 'むりに'],
            ans: 0,
            explain: 'むなしく 表示"徒劳地"'
        },
        {
            q: 'この問題は専門家の間＿＿＿意見が分かれている。',
            sub: '选择正确的表达',
            options: ['において', 'にかけて', 'にわたって', 'にこたえて'],
            ans: 0,
            explain: 'において 表示"在...方面"'
        },
        {
            q: '彼の行動は常識＿＿＿ものである。',
            sub: '选择正确的表达',
            options: ['をこえた', 'をぬきにした', 'をめぐる', 'をものともしない'],
            ans: 0,
            explain: 'をこえた 表示"超越"'
        },
        {
            q: 'この作品は作者の人生観＿＿＿描かれている。',
            sub: '选择正确的表达',
            options: ['にそって', 'にしたがって', 'にこたえて', 'に即して'],
            ans: 3,
            explain: 'に即して 表示"根据"'
        },
        {
            q: '彼の発言は議題＿＿＿ものだった。',
            sub: '选择正确的表达',
            options: ['からはずれた', 'からとびだした', 'からみて', 'からして'],
            ans: 0,
            explain: 'からはずれた 表示"偏离"'
        },
        {
            q: 'この政策は国民の支持＿＿＿実施された。',
            sub: '选择正确的表达',
            options: ['をうけて', 'をへて', 'をふまえて', 'をこめて'],
            ans: 2,
            explain: 'をふまえて 表示"基于"'
        },
        {
            q: '彼の説明は専門的＿＿＿難解だ。',
            sub: '选择正确的表达',
            options: ['すぎて', 'がちで', 'めいて', 'っぽくて'],
            ans: 2,
            explain: 'めいて 表示"带有...的样子"'
        },
        {
            q: 'この案件は慎重な対応＿＿＿。',
            sub: '选择正确的表达',
            options: ['がのぞまれる', 'がかんがえられる', 'がみこまれる', 'がもとめられる'],
            ans: 3,
            explain: 'がもとめられる 表示"被要求"'
        }
		
    ]
        };

        // ----------------- 游戏核心逻辑 -----------------
        let currentLevel = '';
        let quizQuestions = [];
        let currentIndex = 0;
        let score = 0;
        let earnedSushiList = [];
        const mascotDialog = document.getElementById('mascot-dialog');

        function checkProgress(level, forceRestart = false) {
            currentLevel = level;
            const savedData = localStorage.getItem(`quiz_save_${level}`);
            if (!forceRestart && savedData) {
                document.getElementById('resume-level-name').innerText = level;
                document.getElementById('resume-modal').classList.remove('hidden-screen');
            } else {
                startNewQuiz(level);
            }
        }

        function confirmResume(shouldResume) {
            document.getElementById('resume-modal').classList.add('hidden-screen');
            shouldResume ? loadSavedQuiz(currentLevel) : startNewQuiz(currentLevel);
        }

        function saveProgress() {
            if (currentIndex >= 10) return;
            const state = { questions: quizQuestions, index: currentIndex, score: score, sushi: earnedSushiList, timestamp: new Date().getTime() };
            localStorage.setItem(`quiz_save_${currentLevel}`, JSON.stringify(state));
        }

        function clearProgress(level) { localStorage.removeItem(`quiz_save_${level}`); }

        function startNewQuiz(level) {
            let pool = fullQuestionDB[level] || fullQuestionDB['N5'];
            while(pool.length < 10) { pool = pool.concat(pool); }
            quizQuestions = shuffleArray(pool).slice(0, 10);
            currentIndex = 0; score = 0; earnedSushiList = new Array(10).fill(null);
            clearProgress(level);
            enterQuizScreen();
        }

        function loadSavedQuiz(level) {
            const data = JSON.parse(localStorage.getItem(`quiz_save_${level}`));
            if (!data) return startNewQuiz(level);
            quizQuestions = data.questions; currentIndex = data.index; score = data.score; earnedSushiList = data.sushi;
            mascotDialog.innerText = `欢迎回来！继续 ${level} 的挑战！`;
            enterQuizScreen();
        }

        function enterQuizScreen() {
            updateUITheme(currentLevel);
            showScreen('screen-quiz');
            renderSushiBar();
            loadQuestion();
        }

        function saveAndExit() {
            if (!currentLevel) { goHome(); return; }
            saveProgress();
            mascotDialog.innerText = "进度已保存！下次见！🐕";
            setTimeout(goHome, 200);
        }

        function loadQuestion() {
            document.getElementById('next-btn').classList.add('hidden-screen');
            document.getElementById('explanation-area').classList.add('hidden-screen');
            const qData = quizQuestions[currentIndex];
            document.getElementById('q-number').innerText = currentIndex + 1;
            document.getElementById('question-text').innerText = qData.q;
            document.getElementById('question-sub').innerText = qData.sub;

            const optionsDiv = document.getElementById('options-container');
            optionsDiv.innerHTML = '';
            qData.options.forEach((opt, idx) => {
                const btn = document.createElement('button');
                btn.className = `w-full bg-white border-b-4 border-gray-200 p-4 rounded-xl text-lg font-bold text-gray-600 hover:bg-gray-50 transition active:border-b-0 active:translate-y-1 mb-2`;
                btn.innerText = opt;
                btn.onclick = () => { playSound('click'); checkAnswer(idx, btn); };
                optionsDiv.appendChild(btn);
            });
            saveProgress();
        }

        function checkAnswer(selectedIdx, btnElement) {
            const qData = quizQuestions[currentIndex];
            const correctIdx = qData.ans;
            const allBtns = document.getElementById('options-container').querySelectorAll('button');
            allBtns.forEach(b => {
                b.disabled = true;
                b.classList.add('cursor-default', 'opacity-80');
                b.classList.remove('hover:bg-gray-50');
            });

            const reward = SUSHI_REWARDS[currentIndex];
            if (selectedIdx === correctIdx) {
                score++;
                playSound('correct'); 
                btnElement.classList.add('opt-correct', 'pop-in');
                btnElement.classList.remove('opacity-80');
                mascotDialog.innerText = `好棒！${reward.name} Get！😋`;
                earnedSushiList[currentIndex] = reward;
                updateSushiSlot(currentIndex, reward, true);
            } else {
                playSound('wrong'); 
                btnElement.classList.add('opt-wrong');
                btnElement.classList.remove('opacity-80');
                allBtns[correctIdx].classList.add('opt-correct');
                allBtns[correctIdx].classList.remove('opacity-80');
                mascotDialog.innerText = "没关系！看解析！👀";
                updateSushiSlot(currentIndex, null, false);
            }

            document.getElementById('explanation-text').innerText = qData.explain;
            document.getElementById('explanation-area').classList.remove('hidden-screen');
            document.getElementById('explanation-area').classList.add('fade-in');
            
            const nextBtn = document.getElementById('next-btn');
            nextBtn.classList.remove('hidden-screen');
            nextBtn.classList.add('fade-in');
            nextBtn.innerText = (currentIndex === 9) ? "查看战利品 🍱" : "下一题 ➡";
            saveProgress();
        }

        function nextQuestion() {
            currentIndex++;
            if (currentIndex < 10) {
                loadQuestion();
                mascotDialog.innerText = `第 ${currentIndex + 1} 道菜来啦！`;
            } else {
                finishQuiz();
            }
        }

        function finishQuiz() {
            playSound('win'); 
            clearProgress(currentLevel);
            showScreen('screen-result');
            renderBentoBox();
            const percentage = Math.round((score / 10) * 100);
            document.getElementById('final-score').innerText = `${percentage}%`;
            let title = score >= 8 ? "寿司之神" : (score >= 5 ? "寿司师傅" : "学徒");
            document.getElementById('result-title').innerText = title;
            mascotDialog.innerText = "多谢款待！🙏";
        }

        // ----------------- 通用辅助 -----------------
        function renderSushiBar() {
            const container = document.getElementById('sushi-bar-slots');
            container.innerHTML = '';
            for(let i=0; i<10; i++) {
                const slot = document.createElement('div');
                slot.id = `slot-${i}`;
                slot.className = "w-8 h-8 md:w-10 md:h-10 rounded-full flex items-center justify-center text-sm bg-white/40 shadow-inner";
                if (i < currentIndex) {
                    const item = earnedSushiList[i];
                    item ? (slot.innerHTML = item.icon, slot.classList.add('bg-white')) : (slot.innerHTML = "❌", slot.classList.add('text-red-500'));
                } else {
                    slot.innerText = "●"; slot.classList.add('text-gray-400');
                }
                container.appendChild(slot);
            }
        }

        function updateSushiSlot(idx, reward, isCorrect) {
            const slot = document.getElementById(`slot-${idx}`);
            slot.classList.remove('text-gray-400');
            if (isCorrect) {
                slot.innerHTML = reward.icon; slot.classList.add('pop-in', 'bg-white');
            } else {
                slot.innerHTML = "❌"; slot.classList.add('pop-in', 'text-red-500');
            }
        }

        function renderBentoBox() {
            const box = document.getElementById('bento-box');
            box.innerHTML = '';
            earnedSushiList.forEach(item => {
                const div = document.createElement('div');
                div.className = "flex flex-col items-center justify-center p-2 rounded-xl bg-gray-800 border border-gray-700 h-24";
                item ? (div.innerHTML = `<div class="text-4xl pop-in">${item.icon}</div><div class="text-xs text-yellow-500 mt-1">${item.name}</div>`) 
                     : (div.innerHTML = `<div class="text-3xl opacity-20 grayscale">🍽️</div>`);
                box.appendChild(div);
            });
        }

        function showScreen(screenId) {
            ['screen-home', 'screen-quiz', 'screen-result'].forEach(id => document.getElementById(id).classList.add('hidden-screen'));
            document.getElementById(screenId).classList.remove('hidden-screen');
            document.getElementById(screenId).classList.add('fade-in');
        }

        function updateUITheme(level) {
            const colors = {'N5': '#2979FF', 'N4': '#FFAB40', 'N3': '#00E676', 'N2': '#7C4DFF', 'N1': '#FF5252'};
            const color = colors[level] || '#2979FF';
            document.getElementById('level-badge').innerText = level;
            document.getElementById('level-badge').style.color = color;
        }

        function shuffleArray(arr) {
            let newArr = [...arr];
            for (let i = newArr.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArr[i], newArr[j]] = [newArr[j], newArr[i]];
            }
            return newArr;
        }
        
        // 点击小狗：播放两声短促的叫声，并添加抖动效果
        function pokeMascot() {
            playSound('bark');
            setTimeout(() => {
                playSound('bark');
            }, 200);

            mascotDialog.innerText = "汪汪！(想要骨头)";
            
            const dogDiv = document.getElementById('mascot-dog');
            dogDiv.classList.remove('mascot-shake');
            void dogDiv.offsetWidth; 
            dogDiv.classList.add('mascot-shake');
        }

        function goHome() {
            showScreen('screen-home');
        }
    </script>
</body>
</html>
